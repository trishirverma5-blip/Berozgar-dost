<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Ultimate Private Portal</title>
    <style>
        body { background: #050505; color: #eee; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto; margin: 0; padding: 0; }
        #chat { height: 88vh; overflow-y: auto; padding: 15px; box-sizing: border-box; display: flex; flex-direction: column; }
        .msg { background: #111; margin: 6px 0; padding: 12px; border-radius: 12px; border-left: 5px solid; animation: fadeIn 0.3s ease; word-wrap: break-word; }
        .own { border: 1px solid #ff0000; box-shadow: 0 0 12px rgba(255,0,0,0.4); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .tag { font-size: 0.7em; font-weight: 900; padding: 2px 7px; border-radius: 5px; margin-right: 8px; color: #000; text-transform: uppercase; }
        #form-container { height: 12vh; background: #000; display: flex; align-items: center; padding: 0 15px; border-top: 1px solid #222; }
        input { flex: 1; border: none; background: #1a1a1a; color: #fff; padding: 14px 20px; border-radius: 30px; outline: none; font-size: 16px; }
        .sys-msg { color: #666; font-size: 0.8em; text-align: center; margin: 10px 0; font-style: italic; }
    </style>
</head>
<body>
    <div id="chat"></div>
    <form id="form-container">
        <input id="i" placeholder="Message or /login..." autocomplete="off">
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io(), f = document.getElementById('form-container'), i = document.getElementById('i'), c = document.getElementById('chat');
        f.onsubmit = (e) => { e.preventDefault(); if(i.value.trim()) socket.emit('chat message', i.value); i.value = ''; };
        socket.on('chat message', d => {
            const e = document.createElement('div');
            e.className = 'msg ' + (d.o ? 'own' : '');
            e.style.borderLeftColor = d.c;
            e.innerHTML = `<span class="tag" style="background:${d.c}">${d.t}</span><b>${d.n}:</b> ${d.m}`;
            c.appendChild(e);
            c.scrollTop = c.scrollHeight;
        });
        socket.on('sys', m => {
            const e = document.createElement('div');
            e.className = 'sys-msg';
            e.innerText = m;
            c.appendChild(e);
            c.scrollTop = c.scrollHeight;
        });
    </script>
</body>
</html>
